<div class="form-container panel panel-default">
  <div class="panel-body">
    <h2>Update your profile</h2>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <%= devise_error_messages! %>

      <div class="form-group <%= "has-errors" if resource.errors[:credited_name].present? %>">
        <%= f.label :credited_name, "Real Name (optional)" %><small class="errored"><%= resource.errors[:credited_name].join(', ')%></small><br />
        <%= f.text_field :credited_name, class: 'form-control', pattern: '[^@]+', title: 'Enter a name, not an email address' %>
      </div>

      <div class="form-group <%= "has-errors" if resource.errors[:credited_name].present? %>">
        <%= f.label :email, "Email (required)" %><br />
        <%= f.email_field :email, class: 'form-control' %>

        <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
        <% end %>
      </div>

      <div class="form-group">
        <%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
        <%= f.password_field :password, autocomplete: "off", class: 'form-control' %>

        <%= f.label :password_confirmation %><br />
        <%= f.password_field :password_confirmation, autocomplete: "off", class: 'form-control' %>
      </div>

      <div class="form-group">
        <div class="fieldset--password">
          <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
          <%= f.password_field :current_password, autocomplete: "off", class: 'form-control' %>
        </div>
      </div>

      <%= f.submit "Update", class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>

<hr>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="form-container" >
        <h6>Cancel my account</h6>

        <p>
          If for whatever reason you no longer wish to maintain an account with us,
          you can delete it here. Please note that any classifications you've made on
          projects, and any comments you've posted on our Talk discussion fora will
          remain.
        </p>

        <% if flash[:delete_alert] %>
          <p class="alert"><%= flash[:delete_alert] %></p>
        <% end %>
        
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :delete }) do |f| %>
          <div class="form-group">
            <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
            <%= f.password_field :current_password, autocomplete: "off", class: 'form-control' %>
          </div>

          <%= f.submit "Cancel my account", class: 'btn btn-danger' %>
        <% end %>

        <%= link_to "Back", :back %>
      </div>
    </div>
  </div>
</div>
